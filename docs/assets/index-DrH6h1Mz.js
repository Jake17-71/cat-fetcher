(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();const a="[data-js-theme-change]",n=document.body;class h{selectors={root:a,button:"[data-js-theme-button]",toggle:"[data-js-theme-button-toggle]"};stateClasses={isActive:"is-active",light:"light"};icons={moon:`<?xml version="1.0" encoding="iso-8859-1"?>
<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg height="800px" width="800px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="0 0 512 512" xml:space="preserve">
<circle style="fill:#E5E5E5;" cx="256" cy="256" r="244.87"/>
<g>
	<circle style="fill:#AFAFAF;" cx="77.913" cy="256" r="22.261"/>
	<circle style="fill:#AFAFAF;" cx="144.696" cy="367.304" r="44.522"/>
	<circle style="fill:#AFAFAF;" cx="367.304" cy="211.478" r="66.783"/>
</g>
<path d="M437.02,74.98C388.667,26.628,324.381,0,256,0S123.333,26.628,74.98,74.98C26.628,123.333,0,187.62,0,256
	s26.628,132.667,74.98,181.02C123.333,485.372,187.619,512,256,512s132.667-26.628,181.02-74.98C485.372,388.667,512,324.38,512,256
	S485.372,123.333,437.02,74.98z M256,489.739C127.116,489.739,22.261,384.884,22.261,256S127.116,22.261,256,22.261
	S489.739,127.116,489.739,256S384.884,489.739,256,489.739z"/>
<path d="M256,44.522c-48.272,0-95.484,16.691-132.939,46.999c-4.779,3.867-5.518,10.876-1.651,15.654
	c2.199,2.718,5.415,4.129,8.658,4.129c2.459,0,4.935-0.811,6.994-2.479C170.571,81.714,212.808,66.783,256,66.783
	c6.146,0,11.13-4.983,11.13-11.13S262.146,44.522,256,44.522z"/>
<path d="M99.286,130.753c2.119,1.881,4.756,2.805,7.384,2.805c3.072,0,6.131-1.264,8.329-3.743l0.158-0.176
	c4.115-4.567,3.749-11.605-0.818-15.72c-4.566-4.115-11.606-3.749-15.718,0.818l-0.27,0.302
	C94.268,119.638,94.688,126.672,99.286,130.753z"/>
<path d="M111.304,256c0-18.412-14.979-33.391-33.391-33.391S44.522,237.588,44.522,256s14.979,33.391,33.391,33.391
	S111.304,274.412,111.304,256z M77.913,267.13c-6.137,0-11.13-4.993-11.13-11.13c0-6.137,4.993-11.13,11.13-11.13
	s11.13,4.993,11.13,11.13C89.043,262.137,84.05,267.13,77.913,267.13z"/>
<path d="M144.696,311.652c-30.687,0-55.652,24.966-55.652,55.652s24.966,55.652,55.652,55.652s55.652-24.966,55.652-55.652
	S175.382,311.652,144.696,311.652z M144.696,400.696c-18.412,0-33.391-14.979-33.391-33.391s14.979-33.391,33.391-33.391
	s33.391,14.979,33.391,33.391S163.108,400.696,144.696,400.696z"/>
<path d="M367.304,133.565c-42.961,0-77.913,34.952-77.913,77.913s34.952,77.913,77.913,77.913s77.913-34.952,77.913-77.913
	S410.266,133.565,367.304,133.565z M367.304,267.13c-30.687,0-55.652-24.966-55.652-55.652s24.966-55.652,55.652-55.652
	s55.652,24.966,55.652,55.652S397.991,267.13,367.304,267.13z"/>
</svg>`,sun:`<?xml version="1.0" encoding="iso-8859-1"?>
<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg height="800px" width="800px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="0 0 512 512" xml:space="preserve">
<circle style="fill:#FFFE9F;" cx="256" cy="256" r="133.565"/>
<path d="M256,111.304c-79.785,0-144.696,64.91-144.696,144.696S176.215,400.696,256,400.696S400.696,335.785,400.696,256
	S335.785,111.304,256,111.304z M256,378.435c-67.511,0-122.435-54.924-122.435-122.435S188.489,133.565,256,133.565
	S378.435,188.489,378.435,256S323.511,378.435,256,378.435z"/>
<path d="M256,155.826c-30.337,0-58.709,13.527-77.837,37.112c-3.872,4.774-3.141,11.784,1.633,15.656
	c2.062,1.673,4.541,2.487,7.004,2.487c3.239,0,6.451-1.407,8.651-4.119c14.885-18.351,36.953-28.875,60.55-28.875
	c6.147,0,11.13-4.983,11.13-11.13S262.147,155.826,256,155.826z"/>
<path d="M172.533,222.851c-5.946-1.514-12.003,2.104-13.532,8.045c-0.006,0.02-0.028,0.108-0.033,0.129
	c-1.496,5.949,2.113,11.954,8.058,13.467c0.916,0.233,1.833,0.344,2.737,0.344c4.965,0,9.502-3.363,10.795-8.389
	c0.006-0.02,0.028-0.108,0.033-0.129C182.087,230.368,178.479,224.364,172.533,222.851z"/>
<path d="M256,89.043c6.147,0,11.13-4.983,11.13-11.13V11.13C267.13,4.983,262.147,0,256,0s-11.13,4.983-11.13,11.13v66.783
	C244.87,84.06,249.853,89.043,256,89.043z"/>
<path d="M256,422.957c-6.147,0-11.13,4.983-11.13,11.13v66.783c0,6.147,4.983,11.13,11.13,11.13s11.13-4.983,11.13-11.13v-66.783
	C267.13,427.94,262.147,422.957,256,422.957z"/>
<path d="M122.203,137.944c2.174,2.174,5.022,3.26,7.87,3.26c2.848,0,5.698-1.086,7.87-3.26c4.346-4.346,4.346-11.394,0-15.741
	L90.722,74.98c-4.346-4.346-11.394-4.346-15.742,0c-4.346,4.346-4.346,11.394,0,15.741L122.203,137.944z"/>
<path d="M389.797,374.056c-4.346-4.346-11.394-4.346-15.742,0c-4.346,4.346-4.346,11.394,0,15.741l47.222,47.222
	c2.174,2.174,5.022,3.26,7.87,3.26c2.848,0,5.698-1.086,7.87-3.26c4.346-4.346,4.346-11.394,0-15.741L389.797,374.056z"/>
<path d="M89.043,256c0-6.147-4.983-11.13-11.13-11.13H11.13C4.983,244.87,0,249.853,0,256s4.983,11.13,11.13,11.13h66.783
	C84.06,267.13,89.043,262.147,89.043,256z"/>
<path d="M500.87,244.87h-66.783c-6.147,0-11.13,4.983-11.13,11.13s4.983,11.13,11.13,11.13h66.783c6.147,0,11.13-4.983,11.13-11.13
	S507.017,244.87,500.87,244.87z"/>
<path d="M122.203,374.056l-47.222,47.222c-4.346,4.346-4.346,11.394,0,15.741c2.174,2.174,5.022,3.26,7.87,3.26
	s5.698-1.086,7.87-3.26l47.222-47.222c4.346-4.346,4.346-11.394,0-15.741C133.597,369.71,126.55,369.71,122.203,374.056z"/>
<path d="M381.926,141.204c2.848,0,5.698-1.086,7.87-3.26l47.222-47.222c4.346-4.346,4.346-11.394,0-15.741
	c-4.346-4.346-11.394-4.346-15.742,0l-47.222,47.222c-4.346,4.346-4.346,11.394,0,15.741
	C376.23,140.117,379.078,141.204,381.926,141.204z"/>
</svg>`};constructor(t){this.rootElement=t,this.buttonElement=this.rootElement.querySelector(this.selectors.button),this.toggleElement=this.rootElement.querySelector(this.selectors.toggle),this.loadTheme(),this.updateIcon(),this.bindEvent()}onButtonClick(){const t=n.classList.contains(this.stateClasses.light);n.classList.toggle(this.stateClasses.light),this.toggleElement.classList.toggle(this.stateClasses.isActive),localStorage.setItem("theme",t?"dark":"light"),this.updateIcon()}updateIcon(){const t=n.classList.contains(this.stateClasses.light);this.toggleElement.innerHTML=t?this.icons.sun:this.icons.moon}loadTheme(){try{const t=localStorage.getItem("theme");if(t===null){const s=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";localStorage.setItem("theme",s),s==="light"&&(n.classList.add(this.stateClasses.light),this.toggleElement.classList.add(this.stateClasses.isActive))}else t==="light"&&(n.classList.add(this.stateClasses.light),this.toggleElement.classList.add(this.stateClasses.isActive))}catch(t){console.log("Load Theme error:",t)}}bindEvent(){this.buttonElement.addEventListener("click",()=>this.onButtonClick())}}class d{constructor(){this.init()}init(){document.querySelectorAll(a).forEach(t=>{new h(t)})}}const c="[data-js-input-wrapper]";class g{selectors={root:c,inputSelector:"[data-js-tag-input]",suggestionsListSelector:"[data-js-suggestions]",suggestionItemsSelector:"[data-js-suggestion-item]",selectedTagsListSelector:"[data-js-selected-tags]",tagSelector:"[data-js-tag]"};attributes={ariaExpanded:"aria-expanded",hidden:"hidden",ariaSelected:"aria-selected"};constructor(t){this.rootElement=t,this.inputElement=this.rootElement.querySelector(this.selectors.inputSelector),this.suggestionsListElement=this.rootElement.querySelector(this.selectors.suggestionsListSelector),this.suggestionItemElements=Array.from(this.rootElement.querySelectorAll(this.selectors.suggestionItemsSelector)),this.selectedTags=new Set,this.selectedTagsListElement=document.querySelector(this.selectors.selectedTagsListSelector),this.updateSelectedTagsVisibility(),this.bindEvents()}notifyTagsChanged(){const t=new CustomEvent("tagsChanged",{detail:{tags:this.getSelectedTags()},bubbles:!0});this.rootElement.dispatchEvent(t)}handleInputChange(){const t=this.inputElement.value.toLowerCase();let e=0;this.suggestionItemElements.forEach(s=>{s.textContent.trim().toLowerCase().startsWith(t)?(s.removeAttribute("hidden"),e++):s.setAttribute("hidden","")}),e===0?this.suggestionsListElement.setAttribute("data-empty",""):this.suggestionsListElement.removeAttribute("data-empty")}handleInputFocus(){this.showSuggestions()}handleInputBlur(t){const e=t.relatedTarget;e&&this.suggestionsListElement.contains(e)||this.hideSuggestions()}handleSuggestionsBlur(t){const e=t.relatedTarget;e===this.inputElement||this.suggestionsListElement.contains(e)||this.hideSuggestions()}showSuggestions(){this.inputElement.setAttribute(`${this.attributes.ariaExpanded}`,"true"),this.suggestionsListElement.removeAttribute("hidden")}hideSuggestions(){this.inputElement.setAttribute(`${this.attributes.ariaExpanded}`,"false"),this.suggestionsListElement.setAttribute("hidden","")}updateSelectedTagsVisibility(){this.selectedTags.size===0?this.selectedTagsListElement.setAttribute("empty",""):this.selectedTagsListElement.removeAttribute("empty")}createTagElement(t){const e=document.createElement("li");e.className="cat-filter__tag",e.dataset.jsTag=t,e.innerHTML=`
      <span>${t}</span>
       <button
          type="button"
          class="cat-filter__tag-remove"
          aria-label="Удалить тег ${t}"
       ></button>
    `,e.addEventListener("click",()=>this.removeTag(t,e)),this.selectedTagsListElement.appendChild(e)}addTag(t){const e=t.dataset.jsSuggestionItem.trim().toLowerCase();this.selectedTags.has(e)||(this.selectedTags.add(e),this.createTagElement(e),this.updateSelectedTagsVisibility(),this.notifyTagsChanged())}removeTag(t,e){e.remove(),this.selectedTags.delete(t),this.updateSelectedTagsVisibility();const s=this.suggestionItemElements.find(i=>i.dataset.jsSuggestionItem===t);s&&s.setAttribute(`${this.attributes.ariaSelected}`,"false"),this.notifyTagsChanged()}getSelectedTags(){return Array.from(this.selectedTags)}bindSuggestionItemEvents(t){t.addEventListener("click",()=>{t.setAttribute(`${this.attributes.ariaSelected}`,"true"),this.addTag(t)}),t.addEventListener("keydown",e=>{e.key==="Enter"&&(t.setAttribute(`${this.attributes.ariaSelected}`,"true"),this.addTag(t))})}bindEvents(){this.inputElement.addEventListener("focus",()=>this.handleInputFocus()),this.inputElement.addEventListener("blur",t=>this.handleInputBlur(t)),this.suggestionsListElement.addEventListener("blur",t=>this.handleSuggestionsBlur(t),!0),this.inputElement.addEventListener("input",()=>this.handleInputChange()),this.suggestionItemElements.forEach(t=>this.bindSuggestionItemEvents(t))}}class u{constructor(){this.init()}init(){document.querySelectorAll(c).forEach(t=>{new g(t)})}}const m="[data-js-input-wrapper]";class p{selectors={luckyButtonSelector:"[data-js-lucky-button]",searchButtonSelector:"[data-js-search-button]",responseSelector:"[data-js-response]",imagesContainerSelector:"[data-js-images-container]",imageSelector:"[data-js-image]",emptyMessageSelector:"[data-js-empty-message]",errorMessageSelector:"[data-js-error-message]",loaderSelector:"[data-js-loader]"};stateClasses={isLoading:"is-loading"};constructor(t){this.inputWrapperElement=t,this.luckyButtonElement=document.querySelector(this.selectors.luckyButtonSelector),this.searchButtonElement=document.querySelector(this.selectors.searchButtonSelector),this.imagesContainerElement=document.querySelector(this.selectors.imagesContainerSelector),this.emptyMessageElement=document.querySelector(this.selectors.emptyMessageSelector),this.errorMessageElement=document.querySelector(this.selectors.errorMessageSelector),this.loaderElement=document.querySelector(this.selectors.loaderSelector),this.tags=[],this.inputWrapperElement.addEventListener("tagsChanged",e=>{this.tags=e.detail.tags}),this.hideErrorMessage(),this.updateEmptyMessageVisibility(),this.bindEvents()}showLoader(){this.loaderElement.classList.add(this.stateClasses.isLoading)}hideLoader(){this.loaderElement.classList.remove(this.stateClasses.isLoading)}updateEmptyMessageVisibility(){const t=this.imagesContainerElement.children.length-2>0,e=!this.errorMessageElement.hasAttribute("empty");t||e?this.emptyMessageElement.setAttribute("empty",""):this.emptyMessageElement.removeAttribute("empty")}createListElementImage(t){const e=document.createElement("li");e.className="response__image",e.setAttribute("data-js-image",""),e.appendChild(t),this.imagesContainerElement.appendChild(e),e.scrollIntoView({behavior:"smooth",block:"nearest"}),this.updateEmptyMessageVisibility()}createImgElement(t){const e=URL.createObjectURL(t),s=new Image;s.className="cat-image",s.src=e,s.alt="Изображение кота",s.title="Изображение кота",s.onload=()=>{this.hideLoader(),this.createListElementImage(s)},s.onerror=()=>{this.hideLoader(),this.showErrorMessage("Ошибка загрузки изображения")}}fetchLucky(){this.hideErrorMessage(),this.showLoader(),fetch("https://cataas.com/cat?type=medium").then(t=>{if(!t.ok)throw new Error(`${t.status}`);return t.blob()}).then(t=>this.createImgElement(t)).catch(t=>{console.log(t),this.showErrorMessage(t),this.hideLoader()})}onLuckyButtonClick(t){t.preventDefault(),this.fetchLucky()}showErrorMessage(t){this.errorMessageElement.removeAttribute("empty");const e=t.message;let s="";e==="404"?s="Изображение с такими тегами не найдено! Код ошибки: 404":e==="Ошибка загрузки изображения"?s="Не удалось загрузить изображение. Попробуйте ещё раз.":s=`Произошла ошибка при загрузке. Код ошибки: ${e}`,this.errorMessageElement.textContent=s,this.updateEmptyMessageVisibility()}hideErrorMessage(){this.errorMessageElement.setAttribute("empty",""),this.updateEmptyMessageVisibility()}fetchSearch(){if(this.tags.length===0){this.fetchLucky();return}this.hideErrorMessage(),this.showLoader();const e=`https://cataas.com/cat/${this.tags.join(",")}?type=medium`;fetch(e).then(s=>{if(!s.ok)throw new Error(`${s.status}`);return s.blob()}).then(s=>this.createImgElement(s)).catch(s=>{console.log(s),this.showErrorMessage(s),this.hideLoader()})}onSearchButtonClick(t){t.preventDefault(),this.fetchSearch()}bindEvents(){this.luckyButtonElement.addEventListener("click",t=>this.onLuckyButtonClick(t)),this.searchButtonElement.addEventListener("click",t=>this.onSearchButtonClick(t))}}class E{constructor(){this.init()}init(){document.querySelectorAll(m).forEach(t=>{new p(t)})}}const S="[data-js-scroll-to-top]";class y{stateClasses={isVisible:"is-visible"};constructor(t){this.scrollToTopButtonElement=t,this.scrollThreshold=300,this.bindEvents(),this.checkScrollPosition()}checkScrollPosition(){(window.scrollY||document.documentElement.scrollTop)>this.scrollThreshold?this.show():this.hide()}show(){this.scrollToTopButtonElement.classList.add(this.stateClasses.isVisible)}hide(){this.scrollToTopButtonElement.classList.remove(this.stateClasses.isVisible)}onScrollToTopButtonElement(){window.scrollTo({top:0,behavior:"smooth"})}bindEvents(){this.scrollToTopButtonElement.addEventListener("click",()=>this.onScrollToTopButtonElement()),window.addEventListener("scroll",()=>this.checkScrollPosition())}}class b{constructor(){this.init()}init(){document.querySelectorAll(S).forEach(t=>{new y(t)})}}new d;new u;new E;new b;
